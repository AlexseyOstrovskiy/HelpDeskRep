(window.webpackJsonpmyreact=window.webpackJsonpmyreact||[]).push([[0],{10:function(e,r,t){e.exports=t(16)},15:function(e,r,t){},16:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),o=t(8),c=t.n(o),s=(t(15),t(6)),u=t(1),i=t(2),l=t(4),m=t(3),p=t(5),f=t(9),h=function(e){function r(e){var t;return Object(u.a)(this,r),(t=Object(l.a)(this,Object(m.a)(r).call(this,e))).state={value:e.value?e.value:"",className:e.className?e.className:"",error:!1},t}return Object(p.a)(r,e),Object(i.a)(r,[{key:"render",value:function(){var e=this.props,r=e.handleError,t=Object(f.a)(e,["handleError"]);return this.handleError=r,a.a.createElement("input",Object.assign({},t,{value:this.state.value,onChange:this.inputChange,className:this.state.className}))}}]),r}(n.Component);function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(t,!0).forEach(function(r){Object(s.a)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var O=function(e){function r(e){var t;return Object(u.a)(this,r),(t=Object(l.a)(this,Object(m.a)(r).call(this,e))).handleError=function(e,r){e&&(r?t.setState(function(t){return{failure:"",errcount:t.errcount+1,errmsgs:d({},t.errmsgs,Object(s.a)({},e,r))}}):t.setState(function(r){return{failure:"",errcount:1===r.errcount?0:r.errcount-1,errmsgs:d({},r.errmsgs,Object(s.a)({},e,""))}}))},t.renderError=function(){if(t.state.errcount||t.state.failure){var e=t.state.failure||Object.values(t.state.errmsgs).find(function(e){return e});return a.a.createElement("div",{className:"error"},e)}},t.handleSubmit=function(e){if(e.preventDefault(),!t.state.errcount){var r=new FormData(t.form);fetch(t.form.action,{method:t.form.method,body:new URLSearchParams(r)}).then(function(e){e.redirected&&(window.location=e.url)}).catch(function(e){return console.warn(e)})}},e.error?t.state={failure:"wrong username or password!",errcount:0}:t.state={errcount:0},t}return Object(p.a)(r,e),Object(i.a)(r,[{key:"render",value:function(){var e=this,r=this.props.inputs.map(function(r,t){var n=r.name,o=r.placeholder,c=r.type,s=r.value,u=r.className;return a.a.createElement(h,{key:t,name:n,placeholder:o,type:c,value:s,className:"submit"===c?u:"",handleError:e.handleError})}),t=this.renderError();return a.a.createElement("form",Object.assign({},this.props,{onSubmit:this.handleSubmit,ref:function(r){e.form=r}}),r,t)}}]),r}(n.Component),j={name:"loginForm",method:"POST",action:"/doLogin",inputs:[{name:"username",placeholder:"username",type:"text"},{name:"password",placeholder:"password",type:"password"},{type:"submit",value:"Submit",className:"btn"}]},v=new URLSearchParams(window.location.search);c.a.render(a.a.createElement(O,Object.assign({},j,{error:v.get("error")})),document.getElementById("container"))}},[[10,1,2]]]);
//# sourceMappingURL=main.c29c9fa2.chunk.js.map